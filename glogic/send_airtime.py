
import africastalking




def send_airtime_after_survey(num, amt=5):
    username = "ASIS038"
    api_key = "27977c5e42f686f7e2097b296f42ca041a2bd45bed94489ee3ef1c0d11779ae3"
    africastalking.initialize(username, api_key)

    airtime = africastalking.Airtime

    phone_number = num
    currency_code = "ZAR"
    amount = amt

    try:
        response = airtime.send(phone_number=phone_number, amount=amount, currency_code=currency_code)
        print('*'*20)
        print(f"Airtime sent to {num}")
        print(response)
        return 1
    except Exception as e:
        print(f"Encountered an error while sending airtime. More error details below\n {e}")
        return -1



def send_many_retrospective():
    """
    For multiple sending of airtime with a list of numbers. To run just run this as the main file (python send_airtime.py)
    """

    nums = [
27603637520,
27604176275,
27604317872,
27604828286,
27604975165,
27605759624,
27606663555,
27607286292,
27607986811,
27608617642,
27608664846,
27608746836,
27610865588,
27613401770,
27615903299,
27617394594,
27618304911,
27622664085,
27631776226,
27632290771,
27632691416,
27633418757,
27634709036,
27634981524,
27635164614,
27635641027,
27637265269,
27637717052,
27638217901,
27638480295,
27638794665,
27640360857,
27640966060,
27641899241,
27646093370,
27646184923,
27646836128,
27648579380,
27649033608,
27651165154,
27657061237,
27658194726,
27660409933,
27662172319,
27671934572,
27673154558,
27673652904,
27676066880,
27676810120,
27677045603,
27677216666,
27693761307,
27710494433,
27710640339,
27710806700,
27711331094,
27711536389,
27712836178,
27713317804,
27713852712,
27714836784,
27715236051,
27717184310,
27717555826,
27717722439,
27717794948,
27718333491,
27718473480,
27718477806,
27719595581,
27719879789,
27719981107,
27720542791,
27720925660,
27721030260,
27722929875,
27722964752,
27723472053,
27724839535,
27725179256,
27725299023,
27725556566,
27726997716,
27727512799,
27727520373,
27728356960,
27730077309,
27730178946,
27730762510,
27731243325,
27731262586,
27732356132,
27732779549,
27732948280,
27734481623,
27734541856,
27735555724,
27737145040,
27738268596,
27738973215,
27739074600,
27739360184,
27739761122,
27742353934,
27745341052,
27745673059,
27748204021,
27749696291,
27760755160,
27761171725,
27761718873,
27762096653,
27763857379,
27764276971,
27764621474,
27764860040,
27767697812,
27767915889,
27768958336,
27769047611,
27769087774,
27769688415,
27769909537,
27781421921,
27781504736,
27782157372,
27782334768,
27782564652,
27782835713,
27783001790,
27783605360,
27784114355,
27784488827,
27784695353,
27784989928,
27785240627,
27785310907,
27785371948,
27785879229,
27786482513,
27786499022,
27787556776,
27787638099,
27787844423,
27788285842,
27788444405,
27788800272,
27789086187,
27789336339,
27789883822,
27790507013,
27790649432,
27791039449,
27791085520,
27791878149,
27793262285,
27793531594,
27793720199,
27794611658,
27795404629,
27795567813,
27796067665,
27796675268,
27796740862,
27797205476,
27797353823,
27798756440,
27799864467,
27810056794,
27810798704,
27813032658,
27814171763,
27817249164,
27818788865,
27818791561,
27820711954,
27820773492,
27825985649,
27826534422,
27826799212,
27826872360,
27827438495,
27827485657,
27827877907,
27833396840,
27835137817,
27835158465,
27835407488,
27835976797,
27836176807,
27836202581,
27836377423,
27836566421,
27836871946,
27840493375,
27842957257,
27843399495,
27844181791,
27846114599,
27848545741]


    nums_l = []
    for i in nums:
        i = "+" + str(i)
        nums_l.append(i)
    print(nums_l)
    print(len(nums_l))

    print(nums_l)
    print(len(nums_l))
    for i in nums_l:
        send_airtime_after_survey(i, 17)


if __name__ == "__main__":
    send_many_retrospective()